<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Category Data</title>
    <!-- Add your CSS styles or external CSS links here if needed -->
</head>
<body>
    <h1>Category Data</h1>

    <!-- Add a button to trigger fetching the categories -->
    <button onclick="fetchCategories()">Fetch Categories</button>
    <button onclick="authenticateUser1()">Authenticate User</button>

    <div id="categoryList">
        <!-- Category data will be displayed here -->
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        var myTicket;
        var baseURL;
        var userName;
        var password;
        var credentials;

        function authenticateUser1() {
            baseURL = 'http://localhost/otcs/cs.exe';
            userName = 'Admin';
            password = 'Santu@123';
            credentials = { userName: userName, password: password };
            var url = baseURL + '/api/v1/auth';

            $.support.cors = true;
            $.ajax({
                url: url,
                type: "POST",
                crossDomain: true,
                data: credentials,
                dataType: "json",
                contentType: "application/x-www-form-urlencoded",
             success: function (res) {
                    
                    alert("OTCSTicket is Generated");
                    myTicket = res.ticket;
                },

                error: function (res) {
                    alert("Something Error happened! " + res.statusText);
                }
            });
        }

        function fetchCategories() {
            var url = baseURL + '/api/v1/nodes/180089/categories';

            $.ajax({
                url: url,
                type: "GET",
                dataType: "json",
                headers: { "OTCSTICKET": myTicket },

               success: function (res) {
    var data = res.data;

    if (data && data.length > 0) {
        var categoryList = document.getElementById('categoryList');
        categoryList.innerHTML = ''; // Clear any existing data

        // Iterate through the data and display "id"
        for (var i = 0; i < data.length; i++) {
            var category = data[i];
            var categoryItem = document.createElement('div');
            categoryItem.textContent = 'ID: ' + category.id;
            categoryList.appendChild(categoryItem);
        }
    } else {
        alert("No data found.");
    }
},

                error: function (res) {
                    alert("Bad thing happened! " + res.statusText);
                }

               
            });
        }
    </script>
</body>
</html>

