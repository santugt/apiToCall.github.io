<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenText Content Server API</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <h1>OpenText Content Server API</h1>
    <form name="myForm">
        <input type="text" id="ba" name="ba" required>
        <input class="button" onclick="fAuthUser()" type="button" value="Auth User" />
        <p><input class="button" onclick="fGetUserInfo()" type="button" value="Get User Info" /></p>
        <p><input class="button" onclick="fCreateFolder()" type="button" value="Create Folder" /></p>
        <p>
            <input type="text" id="folderName" placeholder="Folder Name">
            <input type="text" id="parentFolderId" placeholder="Parent Folder ID">
            <input class="button" onclick="fCreateCustomFolder()" type="button" value="Create Custom Folder" />
        </p>
    </form>

    <script>
        var myTicket;
        // var ba = 'http://localhost/otcs/cs.exe';
        var saaaa = document.getElementById("ba").value;
        var credentials = { userName: "Admin", password: "Santu@123" };

        // Function to authenticate the user
        function fAuthUser() {
            var url = saaaa + '/api/v1/auth';

            $.support.cors = true;
            $.ajax({
                url: url,
                type: "POST",
                crossDomain: true,
                data: credentials,
                dataType: "json",
                contentType: "application/x-www-form-urlencoded",
                success: function (res) {
                    alert("Ticket=" + res.ticket);
                    myTicket = res.ticket;
                },
                error: function (res) {
                    alert("Bad thing happened! " + res.statusText);
                }
            });
        }

        // Function to create a folder
        function fCreateFolder() {
            alert(myTicket);
            var name = new Date().toISOString().substring(0, 10);
            var myBody = { type: "0", parent_id: "2000", name: "Project - " + makeId() };

            $(document).ready(function () {
                var url = baseURL + '/api/v1/nodes';
                $.support.cors = true;
                $.ajax({
                    url: url,
                    type: "POST",
                    crossDomain: true,
                    data: myBody,
                    dataType: "json",
                    headers: { "OTCSTICKET": myTicket },
                    success: function (res) {
                        alert("success!");
                        alert("Folder object id = " + res.id);
                    },
                    error: function (res) {
                        alert("Bad thing happened! " + res.statusText);
                    }
                });
            });
        }

        // Function to create a custom folder with user-specified name and parent folder ID
        function fCreateCustomFolder() {
            alert(myTicket);
            var folderName = document.getElementById("folderName").value;
            var parentFolderId = document.getElementById("parentFolderId").value;

            var myBody = { type: "0", parent_id: parentFolderId, name: folderName };

            $(document).ready(function () {
                var url = baseURL + '/api/v1/nodes';
                $.support.cors = true;
                $.ajax({
                    url: url,
                    type: "POST",
                    crossDomain: true,
                    data: myBody,
                    dataType: "json",
                    headers: { "OTCSTICKET": myTicket },
                    success: function (res) {
                        alert("success!");
                        alert("Custom Folder object id = " + res.id);
                    },
                    error: function (res) {
                        alert("Bad thing happened! " + res.statusText);
                    }
                });
            });
        }

        // Function to generate a unique ID
        function makeId() {
            var text = "";
            var possible = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
            for (var i = 0; i < 10; i++) {
                text += possible.charAt(Math.floor(Math.random() * possible.length));
            }
            dt = new Date().toISOString().slice(0, 10);
            return text + "-" + dt;
        }

        // Rest of your functions...
    </script>
</body>
</html>
